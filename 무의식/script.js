// ÏßàÎ¨∏Í≥º ÏÑ†ÌÉùÏßÄ Î∞∞Ïó¥
const questions = [
    "‰ºëÊó•„ÄÅ„ÅÇ„Å™„Åü„ÅØ‰∏ª„Å´„Å©„Åì„ÅßÈÅé„Åî„Åó„Åæ„Åô„ÅãÔºü",
    "„Çπ„Éà„É¨„Çπ„ÇíÊÑü„Åò„Åü„Å®„Åç„ÄÅ„Å©„ÅÜ„ÇÑ„Å£„Å¶Ëß£Ê∂à„Åó„Åæ„Åô„ÅãÔºü",
    "Êñ∞„Åó„ÅÑÁí∞Â¢É„ÅßÂèãÈÅî„Çí‰Ωú„Çã„Å®„Åç„ÄÅ„Å©„ÅÜ„Åó„Åæ„Åô„ÅãÔºü",
    "ÈáçË¶Å„Å™Ê±∫ÂÆö„Çí‰∏ã„Åô„Å®„Åç„ÄÅ„Å©„ÅÜ„Åó„Åæ„Åô„ÅãÔºü",
    "Â¨â„Åó„ÅÑÊ∞óÊåÅ„Å°„ÇíÊÑü„Åò„Åü„Å®„Åç„ÄÅ„Å©„ÅÜË°®Áèæ„Åó„Åæ„Åô„ÅãÔºü",
    "ÂèãÈÅî„Å®ÊÑèË¶ã„ÅåÈÅï„ÅÜ„Å®„Åç„ÄÅ„Å©„ÅÜ„Åó„Åæ„Åô„ÅãÔºü",
    "ÁõÆÊ®ô„ÇíÁ´ã„Å¶„Çã„Å®„Åç„ÄÅ„Å©„Çì„Å™„Ç¢„Éó„É≠„Éº„ÉÅ„ÇíÂèñ„Çä„Åæ„Åô„ÅãÔºü",
    "Ë∂£Âë≥„ÅÆÊôÇÈñì„ÅØ‰∏ª„Å´„Å©„ÅÆ„Çà„ÅÜ„Å´ÈÅé„Åî„Åó„Åæ„Åô„ÅãÔºü",
    "‰ªï‰∫ã„ÇÑÂãâÂº∑„Çí„Åô„Çã„Å®„Åç„ÄÅ„Å©„Çì„Å™Áí∞Â¢É„ÅåÂ•Ω„Åç„Åß„Åô„ÅãÔºü",
    "Á™ÅÁÑ∂„ÅÆ‰∫àÂÆöÂ§âÊõ¥„Åå„ÅÇ„Å£„Åü„Å®„Åç„ÄÅ„Å©„ÅÜÊÑü„Åò„Åæ„Åô„ÅãÔºü",
    "ÈáçË¶Å„Å™Ë©±„ÅóÂêà„ÅÑ„Çí„Åô„Çã„Å®„Åç„ÄÅ„Å©„Çì„Å™„Çπ„Çø„Ç§„É´„ÇíÂèñ„Çä„Åæ„Åô„ÅãÔºü",
    "Â§±Êïó„Åó„Åü„Å®„Åç„ÄÅ„Å©„ÅÆ„Çà„ÅÜ„Å´ÂØæÂá¶„Åó„Åæ„Åô„ÅãÔºü",
    "ÊàêÂäü„Åó„Åü„ÅÑ„Å®ÊÄù„ÅÜ„Å®„Åç„ÄÅ‰Ωï„Åå‰∏ÄÁï™„ÅÆÂéüÂãïÂäõ„Å´„Å™„Çä„Åæ„Åô„ÅãÔºü",
    "‰ªñ‰∫∫„Åã„Çâ„ÅÆË©ï‰æ°„Å´„Å§„ÅÑ„Å¶„ÄÅ„Å©„ÅÜËÄÉ„Åà„Åæ„Åô„ÅãÔºü",
    "Â∞ÜÊù•„ÅÆ„Åì„Å®„ÇíËÄÉ„Åà„Çã„Å®„Åç„ÄÅ„Å©„Çì„Å™Ê∞óÊåÅ„Å°„Å´„Å™„Çä„Åæ„Åô„ÅãÔºü"
];

const choices = [
    ["ÂÆ∂„Åß„ÇÜ„Å£„Åè„Çä", "ÂèãÈÅî„Å®Â§ñÂá∫", "Ë∂£Âë≥„Å´Ê≤°È†≠", "‰∫àÂÆö„ÇíÁ´ã„Å¶„Å¶Ë°åÂãï"],
    ["ÈÅãÂãï„Åô„Çã", "Èü≥Ê•Ω„ÇíËÅ¥„Åè", "ÂèãÈÅî„Å®Ë©±„Åô", "È£ü„Åπ„Çã"],
    ["Á©çÊ•µÁöÑ„Å´Ë©±„Åó„Åã„Åë„Çã", "ÊßòÂ≠ê„ÇíË¶ã„Çã", "ÂÖ±ÈÄö„ÅÆË∂£Âë≥„Åã„Çâ", "Ëá™ÁÑ∂„Å™ÊµÅ„Çå„Åß"],
    ["Áõ¥ÊÑü„Çí‰ø°„Åò„Çã", "ÊÖéÈáç„Å´Ê§úË®é", "‰∫∫„Å´Áõ∏Ë´á", "„Éá„Éº„Çø„ÅßÂà§Êñ≠"],
    ["„Åô„ÅêË°®Áèæ", "Êéß„Åà„ÇÅ„Å´", "Ë°åÂãï„ÅßÁ§∫„Åô", "„Åò„Å£„Åè„ÇäÂë≥„Çè„ÅÜ"],
    ["‰∏ªÂºµ„Åô„Çã", "Áõ∏Êâã„Å´Âêà„Çè„Åõ„Çã", "Ë©±„ÅóÂêà„ÅÜ", "ÂàÜÊûê„Åô„Çã"],
    ["Â§ß„Åç„Å™ÁõÆÊ®ô", "ÁèæÂÆüÁöÑ„Å™ÁõÆÊ®ô", "ÊüîËªü„Å™ÁõÆÊ®ô", "ÊÆµÈöéÁöÑ„Å™ÁõÆÊ®ô"],
    ["Ââµ‰ΩúÊ¥ªÂãï", "„Çπ„Éù„Éº„ÉÑ", "Ë™≠Êõ∏", "ÊñôÁêÜ"],
    ["Ë≥ë„ÇÑ„Åã", "Èùô„Åã", "Ëá™ÁÑ∂„ÅÆ‰∏≠", "Êï¥ÁêÜ„Åï„Çå„ÅüÂ†¥ÊâÄ"],
    ["ÊüîËªü„Å´ÂØæÂøú", "Â∞ë„Åó‰∏çÂÆâ", "„ÉÅ„É£„É≥„Çπ„Å®ËÄÉ„Åà„Çã", "Ë®àÁîª„ÇíÁ´ã„Å¶Áõ¥„Åô"],
    ["ÁéáÁõ¥„Å´", "Á©è„ÇÑ„Åã„Å´", "Ë´ñÁêÜÁöÑ„Å´", "ÂÖ±ÊÑü„Åó„Å™„Åå„Çâ"],
    ["„Åô„ÅêÁ´ã„Å°Áõ¥„Çã", "Ê∑±„ÅèÂèçÁúÅ", "ÂéüÂõ†„ÇíÂàÜÊûê", "Âä©„Åë„ÇíÊ±Ç„ÇÅ„Çã"],
    ["Âë®„Çä„ÅÆÊúüÂæÖ", "Ëá™Â∑±ÊàêÈï∑", "Á´∂‰∫âÂøÉ", "ÁêÜÊÉ≥„ÅÆÂÆüÁèæ"],
    ["Ê∞ó„Å´„Åô„Çã", "ÂèÇËÄÉÁ®ãÂ∫¶", "ÁÑ°Ë¶ñ„Åô„Çã", "ÂàÜÊûê„Åô„Çã"],
    ["„Çè„Åè„Çè„Åè", "‰∏çÂÆâ", "Ë®àÁîª„ÇíÁ´ã„Å¶„Çã", "„Å™„Çä„ÇÜ„Åç„Å´‰ªª„Åõ„Çã"]
];

// Í≤∞Í≥º ÌÉÄÏûÖ
const resultTypes = {
    type1: {
        title: "Áõ¥ÊÑüÁöÑ„Å™„É™„Éº„ÉÄ„ÉºÂûã üåü",
        description: [
            "„ÅÇ„Å™„Åü„ÅØÁîü„Åæ„Çå„Å™„Åå„Çâ„ÅÆ„É™„Éº„ÉÄ„Éº„Ç∑„ÉÉ„Éó„ÇíÊåÅ„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ",
            "Áõ¥ÊÑüÁöÑ„Å™Âà§Êñ≠Âäõ„Å®Ê±∫Êñ≠Âäõ„Å´ÂÑ™„Çå„Å¶„Åä„Çä„ÄÅÂë®„Çä„ÅÆ‰∫∫„ÄÖ„ÇíËá™ÁÑ∂„Å®Â∞é„ÅèÂäõ„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ",
            "Êñ∞„Åó„ÅÑ„Ç¢„Ç§„Éá„Ç¢„ÇíÁîü„ÅøÂá∫„Åô„Åì„Å®„ÅåÂæóÊÑè„Åß„ÄÅÂâµÈÄ†ÁöÑ„Å™Ëß£Ê±∫Á≠ñ„ÇíË¶ã„Å§„Åë„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ",
            "ÊôÇ„Å´„ÅØÁã¨Êñ≠ÁöÑ„Å´Ë¶ã„Çâ„Çå„Çã„Åì„Å®„ÇÇ„ÅÇ„Çä„Åæ„Åô„Åå„ÄÅ„Åù„Çå„ÅØÊÉÖÁÜ±„Åã„ÇâÊù•„Çã„ÇÇ„ÅÆ„Åß„Åô„ÄÇ",
            "„ÅÇ„Å™„Åü„ÅÆÂ≠òÂú®„ÅØ„ÄÅÂë®„Çä„ÅÆ‰∫∫„ÄÖ„Å´ÂãáÊ∞ó„Å®Ê¥ªÂäõ„Çí‰∏é„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ"
        ]
    },
    type2: {
        title: "ÊÄù„ÅÑ„ÇÑ„Çä„ÅÆÂÖ±ÊÑüËÄÖ üíï",
        description: [
            "„ÅÇ„Å™„Åü„ÅØÈ©ö„Åè„Åπ„ÅçÂÖ±ÊÑüËÉΩÂäõ„ÅÆÊåÅ„Å°‰∏ª„Åß„Åô„ÄÇ",
            "‰ªñ‰∫∫„ÅÆÊÑüÊÉÖ„ÇíÊ∑±„ÅèÁêÜËß£„Åó„ÄÅÈÅ©Âàá„Å™„Çµ„Éù„Éº„Éà„ÇíÊèê‰æõ„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ",
            "Âë®„Çä„ÅÆ‰∫∫„ÄÖ„ÅÆÂøÉ„ÅÆÊîØ„Åà„Å®„Å™„Çä„ÄÅ‰ø°È†º„Åï„Çå„ÇãÂ≠òÂú®„Åß„Åô„ÄÇ",
            "ÂÑ™„Åó„Åï„Å®ÊÄù„ÅÑ„ÇÑ„Çä„Å´Ê∫¢„Çå„ÄÅ‰∫∫„ÄÖ„ÇíÁôí„ÅôÂäõ„ÇíÊåÅ„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ",
            "ÊôÇ„Å´„ÅØËá™ÂàÜ„ÅÆÊÑüÊÉÖ„ÇíÊäë„Åà„Åô„Åé„Å¶„Åó„Åæ„ÅÜ„Åì„Å®„Åå„ÅÇ„Çä„Åæ„Åô„Åå„ÄÅ„Åù„Çå„ÇÇ„ÅÇ„Å™„Åü„ÅÆÂÑ™„Åó„Åï„ÅÆË°®„Çå„Åß„Åô„ÄÇ"
        ]
    },
    type3: {
        title: "Ë´ñÁêÜÁöÑ„Å™ÂàÜÊûêÂÆ∂ üîç",
        description: [
            "„ÅÇ„Å™„Åü„ÅØÁâ©‰∫ã„ÇíË´ñÁêÜÁöÑ„Å´ÂàÜÊûê„Åô„Çã„Åì„Å®„ÅåÂæóÊÑè„Åß„Åô„ÄÇ",
            "Ë§áÈõë„Å™ÂïèÈ°å„ÇíÊï¥ÁêÜ„Åó„ÄÅÂäπÁéáÁöÑ„Å™Ëß£Ê±∫Á≠ñ„ÇíË¶ã„Å§„Åë„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ",
            "Áü•ÁöÑÂ•ΩÂ•áÂøÉ„ÅåÂº∑„Åè„ÄÅÂ∏∏„Å´Êñ∞„Åó„ÅÑÁü•Ë≠ò„ÇíÊ±Ç„ÇÅ„Å¶„ÅÑ„Åæ„Åô„ÄÇ",
            "ÂÜ∑Èùô„Å™Âà§Êñ≠Âäõ„ÇíÊåÅ„Å°„ÄÅÊÑüÊÉÖ„Å´ÊµÅ„Åï„Çå„Çã„Åì„Å®„ÅåÂ∞ë„Å™„ÅÑ„Åß„Åô„ÄÇ",
            "ÊôÇ„Å´„ÅØÂë®„Çä„Åã„ÇâÂÜ∑„Åü„ÅèË¶ã„Çâ„Çå„Çã„Åì„Å®„ÇÇ„ÅÇ„Çä„Åæ„Åô„Åå„ÄÅ„Åù„Çå„ÅØÊÖéÈáç„Åï„ÅÆË°®„Çå„Åß„Åô„ÄÇ"
        ]
    },
    type4: {
        title: "Ëá™Áî±„Å™ÂâµÈÄ†ËÄÖ üé®",
        description: [
            "„ÅÇ„Å™„Åü„ÅØË±ä„Åã„Å™ÂâµÈÄ†ÊÄß„Å®Áã¨ÂâµÁöÑ„Å™Áô∫ÊÉ≥Âäõ„ÅÆÊåÅ„Å°‰∏ª„Åß„Åô„ÄÇ",
            "Êó¢Â≠ò„ÅÆÊû†„Å´„Å®„Çâ„Çè„Çå„Åö„ÄÅÊñ∞„Åó„ÅÑÂèØËÉΩÊÄß„ÇíËøΩÊ±Ç„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ",
            "Ëä∏Ë°ìÁöÑ„Å™„Çª„É≥„Çπ„Å®Ë°®ÁèæÂäõ„Å´ÂÑ™„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ",
            "Ëá™Áî±„Å™Á≤æÁ•û„ÇíÊåÅ„Å°„ÄÅÁã¨Ëá™„ÅÆ‰æ°ÂÄ§Ë¶≥„ÇíÂ§ßÂàá„Å´„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ",
            "ÊôÇ„Å´„ÅØÁèæÂÆüÁöÑ„Åß„Å™„ÅÑ„Å®ÊÄù„Çè„Çå„Çã„Åì„Å®„ÇÇ„ÅÇ„Çä„Åæ„Åô„Åå„ÄÅ„Åù„Çå„Åì„Åù„Åå„ÅÇ„Å™„Åü„ÅÆÈ≠ÖÂäõ„Åß„Åô„ÄÇ"
        ]
    },
    type5: {
        title: "Â†ÖÂÆü„Å™ÂÆüË°åËÄÖ ‚ö°",
        description: [
            "„ÅÇ„Å™„Åü„ÅØÁ¢∫ÂÆü„Å´Áâ©‰∫ã„ÇíÈÄ≤„ÇÅ„ÇãÂÆüË°åÂäõ„ÅÆÊåÅ„Å°‰∏ª„Åß„Åô„ÄÇ",
            "Ë≤¨‰ªªÊÑü„ÅåÂº∑„Åè„ÄÅÁ¥ÑÊùü„Åó„Åü„Åì„Å®„ÅØÂøÖ„ÅöÂÆà„Çä„Åæ„Åô„ÄÇ",
            "Ë®àÁîªÁöÑ„Å´Ë°åÂãï„Åó„ÄÅÁùÄÂÆü„Å´ÁõÆÊ®ô„ÇíÈÅîÊàê„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ",
            "‰ø°È†ºÊÄß„ÅåÈ´ò„Åè„ÄÅÂë®„Çä„Åã„Çâ„ÅÆÊúüÂæÖ„Å´Âøú„Åà„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ",
            "ÊôÇ„Å´„ÅØÊüîËªüÊÄß„Å´Ê¨†„Åë„Çã„Å®ÊÄù„Çè„Çå„Çã„Åì„Å®„ÇÇ„ÅÇ„Çä„Åæ„Åô„Åå„ÄÅ„Åù„Çå„ÅØË™†ÂÆü„Åï„ÅÆË°®„Çå„Åß„Åô„ÄÇ"
        ]
    }
};

// ÏãúÏûë Î≤ÑÌäº Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà
document.addEventListener('DOMContentLoaded', () => {
    const startButton = document.getElementById('start-button');
    startButton.addEventListener('click', startQuiz);
});

// ÌÄ¥Ï¶à ÏãúÏûë Ìï®Ïàò
function startQuiz() {
    document.getElementById('start-screen').style.display = 'none';
    document.getElementById('quiz-container').style.display = 'block';
    currentQuestion = 0;
    answers = [];
    showQuestion();
}

let currentQuestion = 0;
let answers = [];

// ÏßàÎ¨∏ ÌëúÏãú Ìï®Ïàò
function showQuestion() {
    const quizContainer = document.getElementById('quiz-container');
    if (currentQuestion >= questions.length) {
        showAnalysisPopup();
        return;
    }

    quizContainer.innerHTML = `
        <div class="question-container">
            <div class="progress-bar">
                <div class="progress" style="width: ${(currentQuestion + 1) / questions.length * 100}%"></div>
            </div>
            <h2>Ë≥™Âïè ${currentQuestion + 1}/15</h2>
            <p class="question">${questions[currentQuestion]}</p>
            <div class="choices">
                ${choices[currentQuestion].map((choice, index) => `
                    <button onclick="selectAnswer(${index})" class="choice-btn">
                        ${choice}
                    </button>
                `).join('')}
            </div>
        </div>
    `;
}

// ÎãµÎ≥Ä ÏÑ†ÌÉù Ìï®Ïàò
function selectAnswer(answerIndex) {
    answers.push(answerIndex);
    currentQuestion++;
    showQuestion();
}

// Î∂ÑÏÑù ÌåùÏóÖ ÌëúÏãú Ìï®Ïàò
function showAnalysisPopup() {
    const popup = document.getElementById('analysis-popup');
    popup.style.display = 'flex';
    
    let countdown = 7;
    const countdownElement = document.getElementById('countdown');
    
    const timer = setInterval(() => {
        countdown--;
        countdownElement.textContent = countdown;
        
        if (countdown <= 0) {
            clearInterval(timer);
            popup.style.display = 'none';
            showResult();
        }
    }, 1000);
}

// Í≤∞Í≥º ÌëúÏãú Ìï®Ïàò
function showResult() {
    const resultContainer = document.getElementById('result-container');
    const shareContainer = document.getElementById('share-container');
    const result = calculateResult(answers);
    
    resultContainer.innerHTML = `
        <h2>${resultTypes[result].title}</h2>
        ${resultTypes[result].description.map(desc => `<p>${desc}</p>`).join('')}
    `;
    
    resultContainer.style.display = 'block';
    shareContainer.style.display = 'block';
}

// Í≥µÏú† Í∏∞Îä•
document.getElementById('line-share').addEventListener('click', () => {
    const url = encodeURIComponent(window.location.href);
    window.open(`https://line.me/R/msg/text/?${url}`);
});

document.getElementById('copy-url').addEventListener('click', () => {
    navigator.clipboard.writeText(window.location.href)
        .then(() => alert('URL„Çí„Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ'));
});

document.getElementById('retry-test').addEventListener('click', () => {
    location.reload();
});

document.getElementById('other-test').addEventListener('click', () => {
    location.href = 'http://japan.testpro.site/';
});